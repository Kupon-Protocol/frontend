import{p as _e,b as be,u as ve,a as S,c as F,d as E,i as K,e as se,f as ne,w as P,r as X,o as r,g as i,h as e,j as $,k as he,l as d,t as N,m as k,s as ge,n as ae,q as oe,v as we,x as Te,I as re,C as ie,y as Ne,z as ke,A as Ae,B as W,F as O,D as m,E as D,G as xe,H as L,J as H,K as Ce,L as U,M as $e,N as Ie,O as Me,P as Se,Q as Fe,R as Oe,S as Be,V as Ee,T as Pe}from"./vendor.52aecd56.js";const De=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const o of u.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function a(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerpolicy&&(u.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?u.credentials="include":l.crossorigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function n(l){if(l.ep)return;l.ep=!0;const u=a(l);fetch(l.href,u)}};De();window.process=_e;window.Buffer=be.Buffer;window.util=ve;var Le="/assets/kupon-logo-transparent.3f971aa5.png";function z(){const{chainId:s}=S(),t=F(function(){return s.value==80001?"Mumbai":s.value==3?"Ropsten":s.value==31337?"Localhost":"Unsupported network"}),a=F(function(){return s.value==80001||s.value==137?"MATIC":"ETH"}),n=F(function(){return s.value==80001||s.value==3?!0:s.value==31337});return{currency:a,isNetworkSupported:n,supportedNetworkName:t}}var R=(s,t)=>{for(const[a,n]of t)s[a]=n;return s};const q=s=>(ae("data-v-4907c522"),s=s(),oe(),s),He={class:"navbar navbar-expand-lg navbar-dark"},Ve={class:"container-fluid"},Ke=q(()=>e("img",{src:Le,width:"84",height:"84"},null,-1)),Ue=q(()=>e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),Re={class:"collapse navbar-collapse",id:"navbarSupportedContent"},je={class:"d-flex ms-auto"},Ye={class:"btn-group mx-1"},We={key:0,type:"button",class:"btn btn-danger dropdown-toggle","data-bs-toggle":"dropdown","aria-expanded":"false"},qe={key:1,type:"button",class:"btn btn-primary dropdown-toggle","data-bs-toggle":"dropdown","aria-expanded":"false"},Je={class:"dropdown-menu"},Ze={key:0,class:"btn-group mx-1"},Ge=q(()=>e("button",{type:"button",class:"btn btn-secondary dropdown-toggle","data-bs-toggle":"dropdown","aria-expanded":"false"},"Profile",-1)),Xe={class:"dropdown-menu"},ze={class:"dropdown-item disabled"},Qe={key:0},et=q(()=>e("a",{class:"dropdown-item",target:"_blank",href:"https://faucet.polygon.technology/"},"Get MATIC tokens",-1)),tt=[et],st=E({setup(s){const t=K("store"),{open:a}=we(),{address:n,chainId:l,isActivated:u}=S(),{connect:o,disconnect:f,walletName:h}=se(),T=ne(),{isNetworkSupported:b,supportedNetworkName:_}=z();function y(){T.push({name:"CreateNft"})}function M(){T.push({name:"Profile"})}function C(){localStorage.setItem("connected",null),f()}function c(p){let w,B;p=="ropsten"?(w="wallet_switchEthereumChain",B=[{chainId:"0x3"}]):p=="mumbai"&&(w="wallet_addEthereumChain",B=[{blockExplorerUrls:["https://mumbai.polygonscan.com"],chainId:"0x13881",chainName:"Mumbai Testnet",nativeCurrency:{decimals:18,name:"Matic",symbol:"MATIC"},rpcUrls:["https://matic-mumbai.chainstacklabs.com"]}]),window.ethereum.request({method:w,params:B})}return P(_,()=>{!u.value&&localStorage.getItem("connected")=="metamask"&&o("metamask")}),P(u,p=>{p&&h.value=="metamask"&&localStorage.setItem("connected","metamask")}),P(n,function(){t.methods.fetchNftContractAddresses()}),(p,w)=>{const B=X("router-link");return r(),i("nav",He,[e("div",Ve,[$(B,{to:"/",class:"navbar-brand"},{default:he(()=>[Ke]),_:1}),Ue,e("div",Re,[e("div",je,[e("div",Ye,[d(u)&&!d(b)?(r(),i("button",We,N(d(_)),1)):k("",!0),d(u)&&d(b)?(r(),i("button",qe,N(d(_)),1)):k("",!0),e("ul",Je,[e("li",null,[e("span",{onClick:w[0]||(w[0]=V=>c("mumbai")),class:"dropdown-item"},"Mumbai testnet")]),e("li",null,[e("span",{onClick:w[1]||(w[1]=V=>c("ropsten")),class:"dropdown-item"},"Ropsten testnet")])])]),d(u)?(r(),i("div",Ze,[Ge,e("ul",Xe,[e("li",null,[e("span",ze,N(d(ge)(d(n))),1)]),e("li",null,[e("span",{onClick:M,class:"dropdown-item"},"Go to profile")]),d(l)==80001?(r(),i("li",Qe,tt)):k("",!0),e("li",null,[e("span",{onClick:C,class:"dropdown-item"},"Logout")])])])):k("",!0),d(u)?(r(),i("button",{key:1,onClick:y,class:"btn btn-primary mx-1"},"Create NFT")):(r(),i("button",{key:2,onClick:w[2]||(w[2]=(...V)=>d(a)&&d(a)(...V)),class:"btn btn-primary mx-1"},"Connect Wallet"))])])])])}}});var nt=R(st,[["__scopeId","data-v-4907c522"]]);const at={},ot=Te('<hr class="mt-5" data-v-2e4b6ce8><div class="text-center" data-v-2e4b6ce8><h3 class="text-center" data-v-2e4b6ce8>Join our community</h3><p class="text-center" data-v-2e4b6ce8><a class="btn btn-icon mx-2" target="_blank" href="https://discord.gg/TjTZaCZ4wY" data-v-2e4b6ce8><i class="bi bi-discord" data-v-2e4b6ce8></i></a><a class="btn btn-icon mx-2" target="_blank" href="https://github.com/Kupon-Protocol" data-v-2e4b6ce8><i class="bi bi-github" data-v-2e4b6ce8></i></a><a class="btn btn-icon mx-2" target="_blank" href="https://blog.kupon.network" data-v-2e4b6ce8><i class="bi bi-file-richtext" data-v-2e4b6ce8></i></a></p></div>',2);function rt(s,t){return ot}var it=R(at,[["render",rt],["__scopeId","data-v-2e4b6ce8"]]);const lt="KuponNft",ut=[{inputs:[{internalType:"string",name:"_name",type:"string"},{internalType:"string",name:"_symbol",type:"string"},{internalType:"string",name:"_description",type:"string"},{internalType:"string",name:"_image",type:"string"},{internalType:"uint256",name:"_maxSupply",type:"uint256"},{internalType:"uint256",name:"_price",type:"uint256"},{internalType:"address",name:"_issuer",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Claim",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Completed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"allNfts",outputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"enum KuponNft.NftStatus",name:"status",type:"uint8"},{internalType:"address",name:"lastHolder",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"claim",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"description",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"fetchAllNfts",outputs:[{components:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"enum KuponNft.NftStatus",name:"status",type:"uint8"},{internalType:"address",name:"lastHolder",type:"address"}],internalType:"struct KuponNft.SingleNftData[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_holder",type:"address"}],name:"fetchNftsByHolder",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"hasBeenClaimed",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"hasBeenCompleted",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"image",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"markCompleted",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"maxSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"}],name:"mint",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"price",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalMinted",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdraw",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"_address",type:"address"}],name:"withdrawTo",outputs:[],stateMutability:"payable",type:"function"}];var dt={contractName:lt,abi:ut};function J(){const{signer:s}=S();function t(a){const n=new re(dt.abi);return new ie(a,n,s.value)}return{contract:t}}const ct="KuponFactory",pt=[{inputs:[{internalType:"string",name:"_name",type:"string"},{internalType:"string",name:"_symbol",type:"string"},{internalType:"string",name:"_description",type:"string"},{internalType:"string",name:"_image",type:"string"},{internalType:"uint256",name:"_maxSupply",type:"uint256"},{internalType:"uint256",name:"_price",type:"uint256"}],name:"createKuponNft",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_index",type:"uint256"}],name:"getNftAddressByIndex",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getNftAddressesArray",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getNftAddressesLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_issuerAddress",type:"address"}],name:"getNftsByIssuer",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"nftAddresses",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_issuerAddress",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"nftOfIssuerByIndex",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}];var mt={contractName:ct,abi:pt};function Q(){const{chainId:s,signer:t}=S(),a=F(function(){return s.value==80001?"0x3c02e28A5a5aA9eF83316F11dd79F4c8a1369793":s.value==3?"0x2919f0bE09549814ADF72fb0387D1981699fc6D4":s.value==31337?"0x7e8aB50697C7Abe63Bdab6B155C2FB8D285458cB":"0xNone"});function n(){const l=new re(mt.abi);return new ie(a.value,l,t.value)}return{address:a,contract:n}}const{address:le,isActivated:ue}=S(),{contract:ft}=Q(),{contract:yt}=J(),g=Ne({allNfts:{},claimed:0,completed:0,claimsArray:[],nftContractAddresses:[],userClaimedNftAddresses:[],userCompletedNftAddresses:[]}),_t={getNftsByAddress(s){return g.allNfts[s]}},de={increaseClaims(){g.claimed++},async fetchAllNfts(s,t=!1){if(ue.value){const a=await yt(s).fetchAllNfts();if(g.claimed=0,g.completed=0,g.claimsArray=[],t){const n=g.userClaimedNftAddresses.indexOf(s);n>-1&&g.userClaimedNftAddresses.splice(n,1)}for(let n of a)switch(n.status){case 0:break;case 1:{g.claimed++,g.claimsArray.push([Number(n.tokenId),n.lastHolder]),n.lastHolder==le.value&&!g.userClaimedNftAddresses.includes(s)&&g.userClaimedNftAddresses.push(s);break}case 2:{g.completed++,n.lastHolder==le.value&&!g.userCompletedNftAddresses.includes(s)&&g.userCompletedNftAddresses.push(s);break}}g.allNfts[s]=JSON.parse(JSON.stringify(a))}},async fetchNftContractAddresses(s=!1){if(ue.value&&(g.nftContractAddresses=await ft().getNftAddressesArray(),s))for(let t of g.nftContractAddresses)de.fetchAllNfts(t)}};var ee={state:ke(g),getters:_t,methods:de};const bt={class:"container mt-3"},vt=E({setup(s){const{connect:t}=se(),{isActivated:a}=S(),{supportedNetworkName:n}=z();return Ae("store",ee),W(()=>{!a.value&&localStorage.getItem("connected")=="metamask"&&t("metamask")}),P(n,()=>{ee.methods.fetchNftContractAddresses()}),P(a,function(){ee.methods.fetchNftContractAddresses(!0)}),(l,u)=>{const o=X("router-view"),f=X("vdapp-board");return r(),i(O,null,[$(nt),e("div",bt,[$(o)]),$(it),$(f)],64)}}}),ht="modulepreload",ce={},gt="/",wt=function(t,a){return!a||a.length===0?t():Promise.all(a.map(n=>{if(n=`${gt}${n}`,n in ce)return;ce[n]=!0;const l=n.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${u}`))return;const o=document.createElement("link");if(o.rel=l?"stylesheet":ht,l||(o.as="script",o.crossOrigin=""),o.href=n,document.head.appendChild(o),l)return new Promise((f,h)=>{o.addEventListener("load",f),o.addEventListener("error",h)})})).then(()=>t())};var Tt="/assets/hero.994624ce.png",Nt="/assets/img-placeholder.ddc36070.jpg";const kt={class:"card card-nft"},At=["src"],xt={class:"card-body"},Ct=E({props:{address:String},setup(s){const t=s,a=ne(),{contract:n}=J(),l=m(""),u=m(""),o=m(""),f=m(!1);W(async()=>{t.address&&(l.value=await n(t.address).name(),u.value=await n(t.address).description(),o.value=await n(t.address).image())});function h(){a.push({name:"NftContractDetails",params:{nftAddress:t.address}})}return(T,b)=>(r(),i("div",kt,[D(e("img",{src:o.value,onLoad:b[0]||(b[0]=_=>f.value=!0),onClick:h,class:"card-img-top card-nft-img"},null,40,At),[[xe,f.value]]),f.value?k("",!0):(r(),i("img",{key:0,src:Nt,onClick:h,class:"card-img-top card-nft-img"})),e("div",xt,[e("h5",{class:"card-title card-nft-title",onClick:h},N(l.value),1)])]))}});var j=R(Ct,[["__scopeId","data-v-4805d371"]]);const $t=e("div",{class:"card bg-dark text-white card-hero"},[e("img",{src:Tt,class:"card-img hero-card-img",alt:"Hero image"}),e("div",{class:"card-img-overlay hero-card-img-overlay"},[e("h5",{class:"card-title hero-card-title"},[H(" Create coupons and"),e("br"),H(" vouchers as NFTs ")])])],-1),It=e("h3",null,"Hot Coupons & Vouchers \u{1F525}",-1),Mt={class:"row mb-5 mt-3"},St={class:"col-sm-3"},Ft=E({setup(s){const t=K("store");return(a,n)=>(r(),i("div",null,[$t,It,e("div",Mt,[(r(!0),i(O,null,L(d(t).state.nftContractAddresses,l=>(r(),i("div",St,[$(j,{address:l},null,8,["address"])]))),256))])]))}}),Ot={},Bt={class:"text-center"},Et=e("h1",null,"About",-1),Pt=[Et];function Dt(s,t){return r(),i("div",Bt,Pt)}var Lt=R(Ot,[["render",Dt]]);const Ht={class:"text-center"},Vt=e("h3",{class:"text-center"},"Create a Coupon or Voucher as NFT",-1),Kt={class:"col-md-6 offset-md-3 mt-5"},Ut={class:"mb-4"},Rt=e("label",{for:"nftTitleInput",class:"form-label"},"NFT title",-1),jt=e("small",{id:"titleHelp",class:"form-text"},"Short title for your offer.",-1),Yt={class:"mb-4"},Wt=e("label",{for:"nftDescription",class:"form-label"},"Description",-1),qt={class:"mb-4"},Jt=e("label",{for:"nftImage",class:"form-label"},"Image URL",-1),Zt={class:"mb-4"},Gt=e("label",{for:"nftMaxSupply",class:"form-label"},"Maximum amount of NFT tokens",-1),Xt=e("label",{for:"nftPrice",class:"form-label"},"Price",-1),zt={class:"input-group mb-4"},Qt={class:"input-group-text",id:"basic-addon1"},es=["disabled"],ts={key:0,class:"spinner-grow spinner-grow-sm",role:"status","aria-hidden":"true"},ss=H(" Submit "),ns=e("br",null,null,-1),as={key:0},os=E({setup(s){const t=K("store"),{contract:a}=Q(),{currency:n,isNetworkSupported:l}=z(),u=Ce(),o=m(""),f=m(""),h=m(""),T=m(10),b=m(0),_=m(!1),y=F(function(){if(l.value){if(o.value=="")return{status:!1,message:"Title should not be empty."};if(f.value=="")return{status:!1,message:"Description should not be empty."};if(h.value=="")return{status:!1,message:"Image should not be empty."};if(T.value<1)return{status:!1,message:"Max supply cannot be less than 1."};if(isNaN(T.value))return{status:!1,message:"Max supply must be a number."};if(b.value<0)return{status:!1,message:"Price cannot be below 0."};if(isNaN(b.value))return{status:!1,message:"Price must be a number."}}else return{status:!1,message:"You are on an unsupported network."};return{status:!0,message:"Form is valid"}});function M(){_.value=!0;try{a().createKuponNft(o.value,"SYMBOL",f.value,h.value,$e.from(T.value),Ie(String(b.value))).then(C=>C.wait().then(c=>(console.log("receipt status: "+c.status),console.log(c),c.status==1?(console.log("Success"),u.success("NFT contract successfully created!"),t.methods.fetchNftContractAddresses()):console.log("Failed"),_.value=!1,!0),c=>c.checkCall().then(p=>(console.log("Error message:",p),_.value=!1,!1))))}catch(C){_.value=!1,console.log(C)}}return(C,c)=>(r(),i("div",Ht,[Vt,e("div",Kt,[e("div",Ut,[Rt,D(e("input",{"onUpdate:modelValue":c[0]||(c[0]=p=>o.value=p),type:"text",placeholder:"20% discount on product XYZ",class:"form-control",id:"nftTitleInput","aria-describedby":"titleHelp"},null,512),[[U,o.value]]),jt]),e("div",Yt,[Wt,D(e("textarea",{type:"text","onUpdate:modelValue":c[1]||(c[1]=p=>f.value=p),placeholder:"We offer you a 20% discount on XYZ which you can buy on our website example.org",class:"form-control",id:"nftDescription",rows:"5"},null,512),[[U,f.value]])]),e("div",qt,[Jt,D(e("input",{"onUpdate:modelValue":c[2]||(c[2]=p=>h.value=p),placeholder:".jpg, .png, .gif",type:"text",class:"form-control",id:"nftImage"},null,512),[[U,h.value]])]),e("div",Zt,[Gt,D(e("input",{"onUpdate:modelValue":c[3]||(c[3]=p=>T.value=p),type:"text",class:"form-control",id:"nftMaxSupply"},null,512),[[U,T.value]])]),Xt,e("div",zt,[e("span",Qt,N(d(n)),1),D(e("input",{type:"text","onUpdate:modelValue":c[4]||(c[4]=p=>b.value=p),placeholder:"Any price in ETH; Can be 0 for discounts and similar offers.",class:"form-control",id:"nftPrice"},null,512),[[U,b.value]])]),e("button",{type:"submit",onClick:M,class:"btn btn-primary",disabled:!d(y).status||_.value},[_.value?(r(),i("span",ts)):k("",!0),ss],8,es),ns,d(y).status?k("",!0):(r(),i("small",as,N(d(y).message),1))])]))}}),rs={class:"text-center"},is=e("h3",{class:"text-center"},"Profile",-1),ls=e("ul",{class:"nav nav-tabs mt-5",id:"nftTab",role:"tablist"},[e("li",{class:"nav-item",role:"presentation"},[e("button",{class:"nav-link active",id:"minted-tab","data-bs-toggle":"tab","data-bs-target":"#minted",type:"button",role:"tab","aria-controls":"minted","aria-selected":"true"},"My minted NFTs")]),e("li",{class:"nav-item",role:"presentation"},[e("button",{class:"nav-link",id:"issued-tab","data-bs-toggle":"tab","data-bs-target":"#issued",type:"button",role:"tab","aria-controls":"issued","aria-selected":"false"},"My issued NFTs")]),e("li",{class:"nav-item",role:"presentation"},[e("button",{class:"nav-link",id:"claimed-tab","data-bs-toggle":"tab","data-bs-target":"#claimed",type:"button",role:"tab","aria-controls":"claimed","aria-selected":"false"},"Offer claims")]),e("li",{class:"nav-item",role:"presentation"},[e("button",{class:"nav-link",id:"completed-tab","data-bs-toggle":"tab","data-bs-target":"#completed",type:"button",role:"tab","aria-controls":"completed","aria-selected":"false"},"Completed claims")])],-1),us={class:"tab-content",id:"nftTabContent"},ds={class:"tab-pane fade show active",id:"minted",role:"tabpanel","aria-labelledby":"minted-tab"},cs={class:"row mb-5 mt-3"},ps={class:"col-sm-4"},ms={class:"tab-pane fade",id:"issued",role:"tabpanel","aria-labelledby":"issued-tab"},fs={class:"row mb-5 mt-3"},ys={class:"col-sm-4"},_s={class:"tab-pane fade",id:"claimed",role:"tabpanel","aria-labelledby":"claimed-tab"},bs={class:"row mb-5 mt-3"},vs={class:"col-sm-4"},hs={class:"tab-pane fade",id:"completed",role:"tabpanel","aria-labelledby":"completed-tab"},gs={class:"row mb-5 mt-3"},ws={class:"col-sm-4"},Ts=E({setup(s){const{address:t,chainId:a,isActivated:n}=S(),{contract:l}=Q(),{contract:u}=J(),o=K("store"),f=m([]),h=m([]);W(()=>{T()});async function T(){f.value=[],t.value&&(f.value=await l().getNftsByIssuer(t.value));const b=await l().getNftAddressesArray();let _=[];for(let y of b){const M=await u(y).balanceOf(t.value);Number(M)>0&&_.push(y)}h.value=_}return P(t,function(){T()}),P(a,function(){T()}),(b,_)=>(r(),i("div",rs,[is,ls,e("div",us,[e("div",ds,[e("div",cs,[(r(!0),i(O,null,L(h.value,y=>(r(),i("div",ps,[$(j,{address:y},null,8,["address"])]))),256))])]),e("div",ms,[e("div",fs,[(r(!0),i(O,null,L(f.value,y=>(r(),i("div",ys,[$(j,{address:y},null,8,["address"])]))),256))])]),e("div",_s,[e("div",bs,[(r(!0),i(O,null,L(d(o).state.userClaimedNftAddresses,y=>(r(),i("div",vs,[$(j,{address:y},null,8,["address"])]))),256))])]),e("div",hs,[e("div",gs,[(r(!0),i(O,null,L(d(o).state.userCompletedNftAddresses,y=>(r(),i("div",ws,[$(j,{address:y},null,8,["address"])]))),256))])])])]))}});const I=s=>(ae("data-v-4e786302"),s=s(),oe(),s),Ns={class:"row"},ks={class:"col-md-5"},As={class:"card"},xs=["src"],Cs={class:"col-md-7"},$s={class:"mt-2"},Is={class:"mt-2"},Ms=["disabled"],Ss={key:0,class:"spinner-grow spinner-grow-sm",role:"status","aria-hidden":"true"},Fs={key:1,class:"btn btn-secondary mt-2",disabled:""},Os={key:2},Bs=I(()=>e("hr",null,null,-1)),Es={class:"mb-3 mt-2"},Ps=["disabled"],Ds={key:0,class:"spinner-grow spinner-grow-sm",role:"status","aria-hidden":"true"},Ls=H(" Claim this offer "),Hs={key:3},Vs=I(()=>e("hr",null,null,-1)),Ks=I(()=>e("h3",null,"Open claim!",-1)),Us=I(()=>e("p",null," You have at least one open claim on this NFT's offer. Please contact the NFT issuer and tell them what your account address is so they can verify your claim. ",-1)),Rs=[Vs,Ks,Us],js={class:"row mt-4"},Ys={class:"col nft-info-box rounded"},Ws=I(()=>e("h5",null,"Stats",-1)),qs={class:"col nft-info-box rounded mx-2"},Js=I(()=>e("h5",null,"Additional info",-1)),Zs={key:0,class:"row mt-4"},Gs=I(()=>e("hr",null,null,-1)),Xs=I(()=>e("h3",{class:"text-center"},"Admin",-1)),zs=I(()=>e("p",null," These NFT holders have requested the offer that the NFT promises. These NFTs are now burned and cannot be re-sold or transfered. After you provide an offer to one of these users, mark the claim as completed. ",-1)),Qs={class:"table text-white"},en=I(()=>e("thead",null,[e("tr",null,[e("th",{scope:"col"},"Token ID"),e("th",{scope:"col"},"User address"),e("th",{scope:"col"},"Actions")])],-1)),tn={scope:"row"},sn=["onClick","disabled"],nn={key:0,class:"spinner-grow spinner-grow-sm",role:"status","aria-hidden":"true"},an=H(" Mark completed "),on=E({props:{nftAddress:String},setup(s){const t=s,a=K("store"),{address:n,balance:l,chainId:u}=S(),{contract:o}=J(),f=m(""),h=m(""),T=m(""),b=m(0),_=m(0),y=m(0),M=m(),C=m(0),c=m(!1),p=m(!1),w=m();W(async()=>{t.nftAddress&&(f.value=await o(t.nftAddress).name(),h.value=await o(t.nftAddress).description(),T.value=await o(t.nftAddress).image(),b.value=await o(t.nftAddress).maxSupply(),te(),y.value=await o(t.nftAddress).price(),M.value=await o(t.nftAddress).owner(),G(),a.methods.fetchAllNfts(t.nftAddress))});const B=F(function(){return M.value==n.value}),V=F(function(){let x="ETH";return(u.value==137||u.value==80001)&&(x="MATIC"),y.value==0?"FREE!":String(Me(String(y.value)))+" "+x}),pe=F(function(){return!!a.state.userClaimedNftAddresses.includes(t.nftAddress)});async function me(){p.value=!0;const x=await o(t.nftAddress).fetchNftsByHolder(n.value);try{o(t.nftAddress).claim(Number(x[0])).then(A=>A.wait().then(v=>(console.log("receipt status: "+v.status),console.log(v),v.status==1?(console.log("Success"),G(),a.methods.increaseClaims(),a.methods.fetchAllNfts(t.nftAddress,!0)):console.log("Failed"),p.value=!1,!0),v=>v.checkCall().then(Y=>(console.log("Error message:",Y),p.value=!1,!1))))}catch(A){p.value=!1,console.log(A)}}async function te(){_.value=await o(t.nftAddress).totalMinted()}async function G(){C.value=await o(t.nftAddress).balanceOf(n.value)}function fe(x){w.value=x;try{o(t.nftAddress).markCompleted(x).then(A=>A.wait().then(v=>(console.log("receipt status: "+v.status),console.log(v),v.status==1?(console.log("Success"),a.methods.fetchAllNfts(t.nftAddress,!0)):console.log("Failed"),w.value=null,!0),v=>v.checkCall().then(Y=>(console.log("Error message:",Y),w.value=null,!1))))}catch(A){w.value=null,console.log(A)}}function ye(){c.value=!0;try{o(t.nftAddress).mint(n.value,{value:String(y.value)}).then(x=>x.wait().then(A=>(console.log("receipt status: "+A.status),console.log(A),A.status==1?(console.log("Success"),te(),G()):console.log("Failed"),c.value=!1,!0),A=>A.checkCall().then(v=>(console.log("Error message:",v),c.value=!1,!1))))}catch(x){c.value=!1,console.log(x)}}return(x,A)=>(r(),i(O,null,[e("div",Ns,[e("div",ks,[e("div",As,[e("img",{class:"img-fluid rounded",src:T.value},null,8,xs)])]),e("div",Cs,[e("h3",$s,N(f.value),1),e("p",Is,N(h.value),1),Number(_.value)<Number(b.value)?(r(),i("button",{key:0,onClick:ye,class:"btn btn-primary mt-2",disabled:c.value},[c.value?(r(),i("span",Ss)):k("",!0),H(" Mint for "+N(d(V)),1)],8,Ms)):k("",!0),Number(_.value)>=Number(b.value)?(r(),i("button",Fs,"SOLD OUT!")):k("",!0),C.value>0?(r(),i("div",Os,[Bs,e("p",Es,"Your NFT balance: "+N(C.value),1),C.value>0?(r(),i("button",{key:0,disabled:p.value,onClick:me,class:"btn btn-secondary"},[p.value?(r(),i("span",Ds)):k("",!0),Ls],8,Ps)):k("",!0)])):k("",!0),d(pe)?(r(),i("div",Hs,Rs)):k("",!0)])]),e("div",js,[e("div",Ys,[Ws,e("p",null,"Max supply: "+N(b.value),1),e("p",null,"Already minted: "+N(_.value),1)]),e("div",qs,[Js,e("p",null,"Claims: "+N(d(a).state.claimed),1),e("p",null,"Completed claims: "+N(d(a).state.completed),1)])]),d(B)&&d(a).state.claimsArray.length>0?(r(),i("div",Zs,[Gs,Xs,zs,e("table",Qs,[en,e("tbody",null,[(r(!0),i(O,null,L(d(a).state.claimsArray,v=>(r(),i("tr",null,[e("th",tn,N(v[0]),1),e("td",null,N(v[1]),1),e("td",null,[e("button",{onClick:Y=>fe(v[0]),class:"btn btn-primary btn-sm",disabled:w.value==v[0]},[w.value==v[0]?(r(),i("span",nn)):k("",!0),an],8,sn)])]))),256))])])])):k("",!0)],64))}});var rn=R(on,[["__scopeId","data-v-4e786302"]]);const ln=[{path:"/",name:"Home",component:Ft},{path:"/about",name:"About",component:Lt},{path:"/create",name:"CreateNft",component:os},{path:"/nft-contract/:nftAddress",name:"NftContractDetails",component:rn,props:!0},{path:"/profile",name:"Profile",component:Ts},{path:"/:pathMatch(.*)*",name:"404",component:()=>wt(()=>import("./Error404.5ba91b96.js"),["assets/Error404.5ba91b96.js","assets/vendor.52aecd56.js"])}],un=Se({history:Fe(),routes:ln});const Z=Oe(vt),dn={timeout:5e3,hideProgressBar:!0,closeButton:"button",position:Be.TOP_LEFT,toastClassName:"kupon-toast-class"};Z.use(un);Z.use(Ee,{infuraId:""});Z.use(Pe,dn);Z.mount("#app");
